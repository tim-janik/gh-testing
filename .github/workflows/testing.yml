# This Source Code Form is licensed MPL-2.0: http://mozilla.org/MPL/2.0

# Linting: xclip -sel c <.github/workflows/testing.yml # https://rhysd.github.io/actionlint/

on:
  push:
    branches: ['master', 'trunk', 'wip/**']
    tags:
      - 'v[0-9]+.[0-9]+.[0-9]+*'

jobs:


  Focal-CI:
    runs-on: ubuntu-latest
    container: { image: 'ghcr.io/tim-janik/anklang-ci:focal-latest' }
    steps:
    - run: |
        sudo chown -R `id -u`:`id -g` . ~	;# /github/home - actions/runner/issues/863
        export HOME=$(env -i bash -c 'echo ~') && echo HOME=~ | sudo tee -a $GITHUB_ENV
        sudo chmod -R 0777 /__w/_temp/		;# needed for GitHub cache action
        ls -al /__w /github /home ~
    - run: id && pwd && env && ls -al . && ls -al ~
    - { uses: actions/checkout@v4.1.1,  with: { fetch-depth: 0 } } # Fix actions/checkout#290
